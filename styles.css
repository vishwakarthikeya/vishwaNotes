/* ========== styles.css ========== */
:root {
  --bg-paper: #FAF9F6;
  --bg-warm: #F5E6D3;
  --accent-brown: #8B6F47;
  --deep-brown: #4B3A2F;
  --olive: #6B8E23;
  --maroon: #7A3E3E;
  --shadow: rgba(75, 58, 47, 0.08);
  --font-serif: 'Georgia', 'Times New Roman', serif;
  --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
}
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
body {
  background: var(--bg-paper);
  font-family: var(--font-sans);
  color: var(--deep-brown);
  min-height: 100vh;
  transition: background 0.2s;
}
.hidden { display: none !important; }

/* splash */
.splash-screen {
  position: fixed;
  top:0; left:0; width:100%; height:100%;
  background: var(--bg-warm);
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  z-index: 2000;
  animation: fadeOut 0.8s ease 2.2s forwards;
}
.book-pen-animation {
  position: relative;
  width: 200px; height: 200px;
  perspective: 600px;
}
.book-spine {
  position: absolute; width: 30px; height: 120px; background: var(--deep-brown);
  left: 85px; top: 40px; border-radius: 4px;
  transform: rotateY(15deg);
  animation: bookOpen 2s infinite alternate ease-in-out;
}
.book-cover {
  position: absolute; width: 100px; height: 120px; background: var(--accent-brown);
  left: 70px; top: 40px; border-radius: 0 8px 8px 0;
  transform-origin: left;
  animation: bookCover 2s infinite alternate ease-in-out;
}
.pen {
  position: absolute; width: 12px; height: 140px; background: var(--maroon);
  left: 150px; top: 20px; border-radius: 40%;
  transform: rotate(20deg);
  animation: penOrbit 2s infinite alternate ease-in-out;
}
@keyframes bookOpen {
  0% { transform: rotateY(10deg); }
  100% { transform: rotateY(35deg); }
}
@keyframes bookCover {
  0% { transform: rotateY(0deg); }
  100% { transform: rotateY(20deg); }
}
@keyframes penOrbit {
  0% { transform: translate(0,0) rotate(15deg); }
  100% { transform: translate(-30px, 10px) rotate(45deg); }
}
.splash-tagline {
  margin-top: 40px; font-style: italic; color: var(--deep-brown);
  letter-spacing: 2px; opacity: 0.7;
}
@keyframes fadeOut {
  to { opacity: 0; visibility: hidden; }
}

/* lock screen */
.lock-screen {
  position: fixed; inset:0; background: var(--bg-paper);
  display: flex; align-items: center; justify-content: center; z-index: 1500;
}
.lock-card {
  background: white; padding: 2rem; border-radius: 32px; box-shadow: 0 20px 40px var(--shadow);
  width: 340px; text-align: center; border: 1px solid rgba(139,111,71,0.1);
}
.lock-title { font-weight: 400; margin-bottom: 2rem; font-size: 1.8rem; color: var(--accent-brown); }
.pin-display { display: flex; gap: 1rem; justify-content: center; margin: 2rem 0; }
.pin-dot {
  width: 20px; height: 20px; border-radius: 50%; background: #e0d6cc;
  transition: background 0.2s;
}
.pin-dot.filled { background: var(--olive); }
.pin-keypad {
  display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin: 2rem 0;
}
.pin-key {
  background: none; border: none; font-size: 1.8rem; padding: 0.5rem;
  font-family: var(--font-serif); color: var(--deep-brown); cursor: pointer;
  border-radius: 50%; transition: background 0.2s;
}
.pin-key:hover { background: #e6dbcf; }
.pin-hint { color: #a28d7a; font-size: 0.9rem; }
.shake { animation: shake 0.3s; }
@keyframes shake { 0%,100%{transform:translateX(0);} 20%{transform:translateX(-8px);} 40%{transform:translateX(8px);} 60%{transform:translateX(-4px);} 80%{transform:translateX(4px);} }

/* dashboard */
.dashboard { padding: 24px 16px; max-width: 1440px; margin: 0 auto; }
.dashboard-header {
  display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;
  margin-bottom: 32px; background: rgba(255,255,255,0.5); backdrop-filter: blur(4px);
  padding: 16px 24px; border-radius: 80px; box-shadow: 0 4px 12px var(--shadow);
}
.app-title { font-size: 2rem; font-weight: 400; color: var(--deep-brown); letter-spacing: -0.5px; }
.light { color: var(--olive); }
.book-counter { font-size: 1rem; background: var(--bg-warm); padding: 6px 14px; border-radius: 40px; }
.search-input { border: 1px solid #e2d8cd; border-radius: 60px; padding: 12px 20px; width: 260px; background: white; font-size: 1rem; }
.book-grid {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 24px;
  margin-top: 16px;
}
.book-card {
  background: white; border-radius: 24px; overflow: hidden; box-shadow: 0 6px 14px var(--shadow);
  transition: transform 0.15s, box-shadow 0.2s; cursor: pointer;
  border: 1px solid #f0e7dc;
}
.book-card:hover { transform: translateY(-4px); box-shadow: 0 16px 24px rgba(75,58,47,0.12); }
.book-cover { width: 100%; aspect-ratio: 1/1.2; object-fit: cover; background: #eee3d8; }
.book-info { padding: 16px; }
.book-title { font-weight: 500; margin-bottom: 6px; color: var(--deep-brown); }
.book-desc { font-size: 0.85rem; color: #7a6a5c; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
.fab {
  position: fixed; bottom: 32px; right: 32px; width: 64px; height: 64px; border-radius: 50%;
  background: var(--olive); color: white; font-size: 2.4rem; border: none; box-shadow: 0 8px 20px rgba(107,142,35,0.3);
  cursor: pointer; transition: background 0.2s; z-index: 1000;
}
.fab:hover { background: #557a1f; }

/* modal */
.modal {
  position: fixed; inset:0; background: rgba(75,58,47,0.3); backdrop-filter: blur(6px);
  display: flex; align-items: center; justify-content: center; z-index: 2000;
}
.modal-content {
  background: var(--bg-paper); border-radius: 40px; padding: 32px; width: 90%; max-width: 480px;
  box-shadow: 0 40px 60px var(--shadow); border: 1px solid #ede3d7;
}
.close-modal { float: right; font-size: 2rem; cursor: pointer; color: var(--accent-brown); }
.modal h2 { margin-bottom: 24px; color: var(--deep-brown); font-weight: 400; }
#create-book-form input, #create-book-form textarea, #add-chapter-form input, #add-chapter-form textarea {
  width: 100%; padding: 14px; margin-bottom: 16px; border: 1px solid #e2d4c6; border-radius: 30px;
  font-family: inherit; background: white;
}
.cover-upload-area { display: flex; flex-direction: column; gap: 8px; margin-bottom: 20px; }
.cover-preview { max-width: 100px; max-height: 100px; border-radius: 12px; border: 2px solid var(--accent-brown); object-fit: cover; }
.modal-submit { background: var(--accent-brown); color: white; border: none; padding: 14px; width: 100%; border-radius: 40px; font-size: 1.2rem; cursor: pointer; }

/* book detail */
.book-detail-view { padding: 20px; max-width: 1200px; margin: 0 auto; }
.detail-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
.back-btn { background: none; border: none; font-size: 1.2rem; color: var(--maroon); cursor: pointer; padding: 8px 16px; border-radius: 40px; }
.back-btn:hover { background: #efe4d8; }
.chapter-counter { background: var(--bg-warm); padding: 6px 14px; border-radius: 40px; }
.book-banner { display: flex; gap: 24px; background: white; padding: 24px; border-radius: 48px; margin-bottom: 32px; }
.detail-cover { width: 120px; height: 150px; object-fit: cover; border-radius: 24px; }
.banner-info { flex:1; }
.detail-desc { color: #6b5a4c; margin-top: 8px; }
.chapter-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(240px,1fr)); gap: 20px; margin-top: 24px; }
.chapter-card {
  background: white; border-radius: 24px; padding: 20px; box-shadow: 0 4px 10px var(--shadow);
  border-left: 5px solid var(--olive); transition: 0.1s;
}
.chapter-card:hover { background: #faf1e7; }
.secondary-fab { background: var(--maroon); color: white; border: none; padding: 12px 24px; border-radius: 40px; font-size: 1.2rem; cursor: pointer; }

/* reader */
.chapter-reader-view { height: 100vh; display: flex; flex-direction: column; background: #f2ebe2; }
.reader-header { padding: 16px; display: flex; align-items: center; gap: 16px; background: white; border-bottom: 1px solid #ddd0c0; }
.pdf-frame { flex: 1; width: 100%; border: none; background: #f0ece6; }

/* responsive */
@media (max-width: 600px) {
  .dashboard-header { flex-direction: column; align-items: start; gap: 16px; border-radius: 32px; }
  .book-banner { flex-direction: column; align-items: center; text-align: center; }
  .fab { bottom: 20px; right: 20px; }
}